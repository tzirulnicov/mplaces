package Encoding; 
 
# ================== SUB win2koi ==================== # 
sub win2koi { 
    shift;
    my $str = shift; 
    $str =~ tr[\xC0-\xFF\xA8\xB8][\xE1\xE2\xF7\xE7\xE4\xE5\xF6\xFA\xE9\xEA\xEB\xEC\xED\xEE\xEF\xF0\xF2\xF3\xF4\xF5\xE6\xE8\xE3\xFE\xFB\xFD\xFF\xF9\xF8\xFC\xE0\xF1\xC1\xC2\xD7\xC7\xC4\xC5\xD6\xDA\xC9\xCA\xCB\xCC\xCD\xCE\xCF\xD0\xD2\xD3\xD4\xD5\xC6\xC8\xC3\xDE\xDB\xDD\xDF\xD9\xD8\xDC\xC0\xD1\xB3\xA3]; 
    return $str; 
} 
# ================== SUB koi2win ==================== # 
sub koi2win { 
    shift;
    my $str = shift; 
    $str =~ tr[\xE1\xE2\xF7\xE7\xE4\xE5\xF6\xFA\xE9\xEA\xEB\xEC\xED\xEE\xEF\xF0\xF2\xF3\xF4\xF5\xE6\xE8\xE3\xFE\xFB\xFD\xFF\xF9\xF8\xFC\xE0\xF1\xC1\xC2\xD7\xC7\xC4\xC5\xD6\xDA\xC9\xCA\xCB\xCC\xCD\xCE\xCF\xD0\xD2\xD3\xD4\xD5\xC6\xC8\xC3\xDE\xDB\xDD\xDF\xD9\xD8\xDC\xC0\xD1\xB3\xA3][\xC0-\xFF\xA8\xB8]; 
    return $str; 
} 
# ================== SUB win2dos ==================== # 
sub win2dos { 
    shift;
    my $str = shift; 
    $str =~ tr[\xC0-\xFF\xA8\xB8][\x80\x81\x82\x83\x84\x85\x86\x87\x88\x89\x8A\x8B\x8C\x8D\x8E\x8F\x90\x91\x92\x93\x94\x95\x96\x97\x98\x99\x9A\x9B\x9C\x9D\x9E\x9F\xA0\xA1\xA2\xA3\xA4\xA5\xA6\xA7\xA8\xA9\xAA\xAB\xAC\xAD\xAE\xAF\xE0\xE1\xE2\xE3\xE4\xE5\xE6\xE7\xE8\xE9\xEA\xEB\xEC\xED\xEE\xEF\xF0\xF1]; 
    return $str; 
} 
# ================== SUB dos2win ==================== # 
sub dos2win { 
    shift;
    my $str = shift; 
    $str =~ tr[\x80\x81\x82\x83\x84\x85\x86\x87\x88\x89\x8A\x8B\x8C\x8D\x8E\x8F\x90\x91\x92\x93\x94\x95\x96\x97\x98\x99\x9A\x9B\x9C\x9D\x9E\x9F\xA0\xA1\xA2\xA3\xA4\xA5\xA6\xA7\xA8\xA9\xAA\xAB\xAC\xAD\xAE\xAF\xE0\xE1\xE2\xE3\xE4\xE5\xE6\xE7\xE8\xE9\xEA\xEB\xEC\xED\xEE\xEF\xF0\xF1][\xC0-\xFF\xA8\xB8]; 
    return $str; 
} 
# ================== SUB dos2koi ==================== # 
sub dos2koi { 
    shift;
    my $str = shift; 
    $str =~ tr[\x80\x81\x82\x83\x84\x85\x86\x87\x88\x89\x8A\x8B\x8C\x8D\x8E\x8F\x90\x91\x92\x93\x94\x95\x96\x97\x98\x99\x9A\x9B\x9C\x9D\x9E\x9F\xA0\xA1\xA2\xA3\xA4\xA5\xA6\xA7\xA8\xA9\xAA\xAB\xAC\xAD\xAE\xAF\xE0\xE1\xE2\xE3\xE4\xE5\xE6\xE7\xE8\xE9\xEA\xEB\xEC\xED\xEE\xEF\xF0\xF1][\xE1\xE2\xF7\xE7\xE4\xE5\xF6\xFA\xE9\xEA\xEB\xEC\xED\xEE\xEF\xF0\xF2\xF3\xF4\xF5\xE6\xE8\xE3\xFE\xFB\xFD\xFF\xF9\xF8\xFC\xE0\xF1\xC1\xC2\xD7\xC7\xC4\xC5\xD6\xDA\xC9\xCA\xCB\xCC\xCD\xCE\xCF\xD0\xD2\xD3\xD4\xD5\xC6\xC8\xC3\xDE\xDB\xDD\xDF\xD9\xD8\xDC\xC0\xD1\xB3\xA3]; 
    return $str; 
} 
# ================== SUB koi2dos ==================== # 
sub koi2dos { 
    shift;
    my $str = shift; 
    $str =~ tr[\xE1\xE2\xF7\xE7\xE4\xE5\xF6\xFA\xE9\xEA\xEB\xEC\xED\xEE\xEF\xF0\xF2\xF3\xF4\xF5\xE6\xE8\xE3\xFE\xFB\xFD\xFF\xF9\xF8\xFC\xE0\xF1\xC1\xC2\xD7\xC7\xC4\xC5\xD6\xDA\xC9\xCA\xCB\xCC\xCD\xCE\xCF\xD0\xD2\xD3\xD4\xD5\xC6\xC8\xC3\xDE\xDB\xDD\xDF\xD9\xD8\xDC\xC0\xD1\xB3\xA3][\x80\x81\x82\x83\x84\x85\x86\x87\x88\x89\x8A\x8B\x8C\x8D\x8E\x8F\x90\x91\x92\x93\x94\x95\x96\x97\x98\x99\x9A\x9B\x9C\x9D\x9E\x9F\xA0\xA1\xA2\xA3\xA4\xA5\xA6\xA7\xA8\xA9\xAA\xAB\xAC\xAD\xAE\xAF\xE0\xE1\xE2\xE3\xE4\xE5\xE6\xE7\xE8\xE9\xEA\xEB\xEC\xED\xEE\xEF\xF0\xF1]; 
    return $str; 
} 
 
sub utf2win {
   shift;
   my $mess=shift; 
   my %conv=''; 
   my @utf8=('\xD0\xB0','\xD0\xB1','\xD0\xB2','\xD0\xB3','\xD0\xB4', 
          '\xD0\xB5', '\xD1\x91','\xD0\xB6','\xD0\xB7','\xD0\xB8', 
          '\xD0\xB9','\xD0\xBA','\xD0\xBB','\xD0\xBC', '\xD0\xBD', 
          '\xD0\xBE','\xD0\xBF','\xD1\x80','\xD1\x81','\xD1\x82', 
          '\xD1\x83','\xD1\x84', '\xD1\x85','\xD1\x86','\xD1\x87', 
          '\xD1\x88','\xD1\x89','\xD1\x8A','\xD1\x8B','\xD1\x8C', 
          '\xD1\x8D','\xD1\x8E','\xD1\x8F','\xD0\x90','\xD0\x91', 
          '\xD0\x92','\xD0\x93','\xD0\x94', '\xD0\x95','\xD0\x81', 
          '\xD0\x96','\xD0\x97','\xD0\x98','\xD0\x99','\xD0\x9A', 
          '\xD0\x9B', '\xD0\x9C','\xD0\x9D','\xD0\x9E','\xD0\x9F', 
          '\xD0\xA0','\xD0\xA1','\xD0\xA2','\xD0\xA3', '\xD0\xA4', 
          '\xD0\xA5','\xD0\xA6','\xD0\xA7','\xD0\xA8','\xD0\xA9', 
          '\xD0\xAA','\xD0\xAB', '\xD0\xAC','\xD0\xAD','\xD0\xAE', 
          '\xD0\xAF','\xD1\x97','\xD0\x87','\xD1\x94','\xD1\x96', 
          '\xD0\x86','\xD2\x91','\xD2\x90','\xD1\x9E','\xD0\x8E', 
          '\xD1\x91','\xD0\x81','\xD0\x84'); 
   my @win=('à','á','â','ã','ä','å','¸','æ','ç','è','é','ê','ë','ì','í', 
         'î','ï','ð','ñ','ò', 'ó','ô','õ','ö','÷','ø','ù','ú','û','ü', 
         'ý','þ','ÿ','À','Á','Â','Ã','Ä','Å','¨', 'Æ', 'Ç','È','É','Ê', 
         'Ë','Ì','Í','Î', 'Ï','Ð','Ñ','Ò','Ó','Ô','Õ','Ö','×','Ø','Ù', 
         'Ú','Û','Ü','Ý','Þ','ß','¿','¯','º', '³' ,'²','´','¥','¢','¡','¸','¨','ª'); 
 
   no strict; 
   { 
      @hash{@utf8}=@win;
      %conv=%hash; 
   }

   foreach my $sym(keys %conv) { 
      $mess=~s/$sym/$conv{$sym}/g; 
   }
   return $mess; 
}
1;
